@inject IStringLocalizer<SharedResource> L

<div class="bg-white dark:bg-gray-900 rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">@L["BudgetStatus"]</h3>
        <a href="/budget" class="text-sm text-primary-500 hover:text-primary-600">@L["Manage"] →</a>
    </div>
    
    @if (Summary != null)
    {
        <div class="mb-4">
            <div class="flex justify-between text-sm mb-1">
                <span class="text-gray-600 dark:text-gray-400">@Summary.TotalSpent.ToString("N0") € / @Summary.TotalBudget.ToString("N0") €</span>
                <span class="font-medium @(Summary.PercentUsed > 100 ? "text-red-500" : "text-gray-900 dark:text-gray-100")">@Summary.PercentUsed.ToString("F0")%</span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                <div class="h-2 rounded-full transition-all @(Summary.PercentUsed > 100 ? "bg-red-500" : Summary.PercentUsed > 80 ? "bg-amber-500" : "bg-emerald-500")" 
                     style="width: @(Math.Min(100, Summary.PercentUsed))%"></div>
            </div>
        </div>
        
        <div class="space-y-2">
            @foreach (var cat in Summary.Categories.Where(c => c.Spent > 0).OrderByDescending(c => c.Spent).Take(5))
            {
                <div class="flex items-center justify-between text-sm">
                    <div class="flex items-center gap-2">
                        <span>@cat.Icon</span>
                        <span class="text-gray-600 dark:text-gray-400">@cat.Name</span>
                    </div>
                    <span class="font-medium @(cat.IsOverBudget ? "text-red-500" : "text-gray-900 dark:text-gray-100")">
                        @cat.Spent.ToString("N0") €
                    </span>
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-gray-500 text-sm">@L["NoBudgetData"]</p>
    }
</div>

@code {
    [Parameter] public BudgetSummary? Summary { get; set; }
}

