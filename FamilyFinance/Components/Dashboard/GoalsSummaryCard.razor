@inject IStringLocalizer<SharedResource> L

<div class="bg-white dark:bg-gray-900 rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">@L["GoalsProgress"]</h3>
        <a href="/goals" class="text-sm text-primary-500 hover:text-primary-600">@L["ViewAll"] →</a>
    </div>
    
    @if (Goals != null && Goals.Any())
    {
        <div class="space-y-4">
            @foreach (var g in Goals.OrderBy(x => x.Priority).Take(3))
            {
                var progress = g.Target > 0 ? Math.Min(100, (g.AllocatedAmount / g.Target) * 100) : 0;
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">@g.Name</span>
                        <span class="text-sm text-gray-500">@g.AllocatedAmount.ToString("N0") / @g.Target.ToString("N0") €</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="h-2 rounded-full bg-primary-500 transition-all" style="width: @progress%"></div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-gray-500 text-sm">@L["NoGoalsSet"]</p>
    }
</div>

@code {
    [Parameter] public List<Goal>? Goals { get; set; }
}

