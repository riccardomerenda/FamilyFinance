@inject IStringLocalizer<SharedResource> L
@inject IJSRuntime JS

<button @onclick="Toggle" 
        @onclick:stopPropagation="true"
        @ref="_buttonRef"
        class="w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-primary-100 dark:hover:bg-primary-900/50 text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all inline-flex items-center justify-center text-xs font-bold"
        title="@L["HelpTitle"]">
    ?
</button>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Content { get; set; } = "";
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private ElementReference _buttonRef;
    private bool _isOpen = false;

    private async Task Toggle()
    {
        _isOpen = !_isOpen;
        
        if (_isOpen)
        {
            await JS.InvokeVoidAsync("showHelpTooltip", _buttonRef, Title, Content, L["GotIt"].Value);
        }
        else
        {
            await JS.InvokeVoidAsync("hideHelpTooltip");
        }
    }
}
